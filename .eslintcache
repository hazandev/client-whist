[{"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\starter MERN\\Taskman-main\\frontend\\src\\services\\userService.js":"1","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\index.js":"2","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\reportWebVitals.js":"3","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\serviceWorkerRegistration.js":"4","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\store\\store.js":"5","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\App.jsx":"6","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\routes.js":"7","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\AppHeader.jsx":"8","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\pages\\Home.jsx":"9","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\pages\\Admin.jsx":"10","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\services\\productService.js":"11","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\services\\generalService\\httpService.js":"12","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\services\\generalService\\utilService.js":"13","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\store\\reducers\\productReducer.js":"14","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\store\\actions\\productActions.js":"15","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\product\\productList.jsx":"16","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\product\\productPreview.jsx":"17","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\services\\generalService\\customHooks.js":"18","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\product\\EditProduct.jsx":"19","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\product\\ProductList.jsx":"20","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\product\\ProductPreview.jsx":"21","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\CartList.jsx":"22","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\pages\\State.jsx":"23","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\services\\cartService.js":"24","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\services\\stateService.js":"25"},{"size":2097,"mtime":1625572620640,"results":"26","hashOfConfig":"27"},{"size":910,"mtime":1625572616786,"results":"28","hashOfConfig":"29"},{"size":364,"mtime":1625572616814,"results":"30","hashOfConfig":"29"},{"size":5064,"mtime":1625572616929,"results":"31","hashOfConfig":"29"},{"size":444,"mtime":1625845884117,"results":"32","hashOfConfig":"29"},{"size":537,"mtime":1626279481407,"results":"33","hashOfConfig":"29"},{"size":325,"mtime":1626133585666,"results":"34","hashOfConfig":"29"},{"size":615,"mtime":1626224791230,"results":"35","hashOfConfig":"29"},{"size":2170,"mtime":1626236301012,"results":"36","hashOfConfig":"29"},{"size":2003,"mtime":1626228501191,"results":"37","hashOfConfig":"29"},{"size":824,"mtime":1626180116725,"results":"38","hashOfConfig":"29"},{"size":1093,"mtime":1625746977460,"results":"39","hashOfConfig":"29"},{"size":4359,"mtime":1626187634340,"results":"40","hashOfConfig":"41"},{"size":974,"mtime":1626013959383,"results":"42","hashOfConfig":"29"},{"size":1433,"mtime":1626129500276,"results":"43","hashOfConfig":"29"},{"size":594,"mtime":1626180074756,"results":"44","hashOfConfig":"41"},{"size":1347,"mtime":1626180996346,"results":"45","hashOfConfig":"41"},{"size":485,"mtime":1623743349000,"results":"46","hashOfConfig":"29"},{"size":2385,"mtime":1626229490016,"results":"47","hashOfConfig":"29"},{"size":576,"mtime":1626231826545,"results":"48","hashOfConfig":"29"},{"size":1416,"mtime":1626235893782,"results":"49","hashOfConfig":"29"},{"size":996,"mtime":1626236274459,"results":"50","hashOfConfig":"29"},{"size":1773,"mtime":1626237002622,"results":"51","hashOfConfig":"29"},{"size":278,"mtime":1626165462417,"results":"52","hashOfConfig":"29"},{"size":2902,"mtime":1626223715220,"results":"53","hashOfConfig":"29"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"57"},"ydvja0",{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1xw3gid",{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"77"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"1tchsuu",{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"90","messages":"91","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"92","messages":"93","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"94"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"100","messages":"101","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"109","messages":"110","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"111"},"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\starter MERN\\Taskman-main\\frontend\\src\\services\\userService.js",["112"],"// import { storageService } from './asyncStorageService'\r\nimport { httpService } from './generalService/httpService'\r\nconst SCORE_FOR_REVIEW = 10\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update,\r\n    getLoggedinUser\r\n}\r\n\r\nwindow.userService = userService\r\n// Note: due to async, must run one by one...\r\n// userService.signup({fullname: 'Puki Norma', username: 'user1', password:'123',score: 100, isAdmin: false})\r\n// userService.signup({fullname: 'Master Adminov', username: 'admin', password:'123', score: 100, isAdmin: true})\r\n\r\nfunction getUsers() {\r\n    // return storageService.query('user')\r\n    return httpService.get(`user`)\r\n}\r\n\r\nfunction getById(userId) {\r\n    // return storageService.get('user', userId)\r\n    return httpService.get(`user/${userId}`)\r\n}\r\nfunction remove(userId) {\r\n    // return storageService.remove('user', userId)\r\n    return httpService.delete(`user/${userId}`)\r\n}\r\n\r\nasync function update(user) {\r\n    // return storageService.put('user', user)\r\n    user = await httpService.put(`user/${user._id}`, user)\r\n    // Handle case in which admin updates other user's details\r\n    if (getLoggedinUser()._id === user._id) _saveLocalUser(user)\r\n}\r\n\r\nasync function login(userCred) {\r\n    // const users = await storageService.query('user')\r\n    // const user = users.find(user => user.username === userCred.username)\r\n    // return _saveLocalUser(user)\r\n\r\n    const user = await httpService.post('auth/login', userCred)\r\n    if (user) return _saveLocalUser(user)\r\n}\r\nasync function signup(userCred) {\r\n    // const user = await storageService.post('user', userCred)\r\n    const user = await httpService.post('auth/signup', userCred)\r\n    return _saveLocalUser(user)\r\n}\r\nasync function logout() {\r\n    sessionStorage.clear()\r\n    return await httpService.post('auth/logout')\r\n}\r\nfunction _saveLocalUser(user) {\r\n    sessionStorage.setItem('loggedinUser', JSON.stringify(user))\r\n    return user\r\n}\r\n\r\nfunction getLoggedinUser() {\r\n    return JSON.parse(sessionStorage.getItem('loggedinUser'))\r\n}\r\n\r\n",["113","114"],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\index.js",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\reportWebVitals.js",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\serviceWorkerRegistration.js",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\store\\store.js",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\App.jsx",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\routes.js",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\AppHeader.jsx",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\pages\\Home.jsx",["115"],"import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { AiOutlineShoppingCart } from \"react-icons/ai\";\r\nimport { ProductList } from \"../cmps/product/ProductList\";\r\nimport { CartList } from \"../cmps/CartList\";\r\n// import { Link } from \"react-router-dom\"\r\nimport { loadProducts } from \"../store/actions/productActions\";\r\nimport { cartService } from \"../services/cartService\";\r\n\r\nexport const Home = () => {\r\n  const dispatch = useDispatch();\r\n  const products = useSelector((state) => state.productModule.products);\r\n  const [toggleCart, setToggleCart] = useState(false);\r\n  const [productsCart, setProductsCart] = useState([]);\r\n  const [uniqeProduct, setUniqeProduct] = useState([]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"mount\");\r\n    dispatch(loadProducts());\r\n    return () => {\r\n      console.log(\"unmounted home\");\r\n    };\r\n  }, []);\r\n\r\n  const onBuyProduct = (product) => {\r\n    setProductsCart((prevProductsCart) => [...prevProductsCart, product]);\r\n    if (!uniqeProduct.includes(product.title)) {\r\n      setUniqeProduct((prevUniqeProduct) => [\r\n        ...prevUniqeProduct,\r\n        product.title,\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const onPay = (totalPay) => {\r\n    const payCart = {\r\n      date: Date.now(),\r\n      productsCart: productsCart,\r\n      uniqeProduct: uniqeProduct,\r\n      totalPrice: totalPay,\r\n    };\r\n    setProductsCart([]);\r\n    cartService.payCart(payCart);\r\n  };\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      {products && (\r\n        <ProductList products={products} onBuyProduct={onBuyProduct} />\r\n      )}\r\n      <div className=\"cart-side\">\r\n        <div\r\n          className=\"btn cart-btn hover-span flex\"\r\n          onClick={() => {\r\n            setToggleCart((prevToggleCart) => !prevToggleCart);\r\n          }}\r\n        >\r\n          {productsCart.length > 0 && (\r\n            <span className=\"count-product\">{productsCart.length}</span>\r\n          )}\r\n          <AiOutlineShoppingCart />\r\n        </div>\r\n        {toggleCart && productsCart.length > 0 && (\r\n          <CartList productsCart={productsCart} onPay={onPay} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\pages\\Admin.jsx",["116","117"],"import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { EditProduct } from \"../cmps/product/EditProduct\";\r\nimport { ProductList } from \"../cmps/product/ProductList\";\r\nimport { IoMdAddCircleOutline } from \"react-icons/io\";\r\nimport { CgCloseR } from \"react-icons/cg\";\r\n\r\n\r\n\r\n// import { Link } from \"react-router-dom\"\r\nimport { loadProducts, removeProduct } from \"../store/actions/productActions\";\r\n\r\nexport const Admin = () => {\r\n  const dispatch = useDispatch();\r\n  const products = useSelector((state) => state.productModule.products);\r\n  const [toggleEdit, setToggleEdit] = useState(false);\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n\r\n  useEffect(() => {\r\n    console.log(\"mount\");\r\n    dispatch(loadProducts());\r\n    return () => {\r\n      console.log(\"unmounted admin\");\r\n    };\r\n  }, []);\r\n\r\n  const onDeleteProduct = useCallback((productId) => {\r\n    dispatch(removeProduct(productId));\r\n  }, []);\r\n\r\n  const onEditProduct = useCallback((productId) => {\r\n    setToggleEdit(true);\r\n    setSelectedProduct(`${productId}`);\r\n  }, []);\r\n\r\n  const onAddProduct = () => {\r\n    setSelectedProduct(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin\">\r\n      {products.length > 0 && (\r\n        <ProductList\r\n          products={products}\r\n          onDeleteProduct={onDeleteProduct}\r\n          onEditProduct={onEditProduct}\r\n        />\r\n      )}\r\n\r\n      <div className=\"add-product flex column\">\r\n        <button\r\n          onClick={() => {\r\n            onAddProduct();\r\n            setToggleEdit((prevToggleEdit) => !prevToggleEdit);\r\n          }}\r\n        className=\"btn-reset right-self\">\r\n          {!toggleEdit ? (\r\n            <IoMdAddCircleOutline className=\"add-btn hover-span\" />\r\n          ) : (\r\n            <CgCloseR className=\"close-btn hover-span\"/>\r\n          )}\r\n        </button>\r\n        {toggleEdit && <EditProduct productId={selectedProduct} />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\services\\productService.js",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\services\\generalService\\httpService.js",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\services\\generalService\\utilService.js",["118","119"],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\store\\reducers\\productReducer.js",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\store\\actions\\productActions.js",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\product\\productList.jsx",["120","121","122"],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\product\\productPreview.jsx",["123","124","125","126","127"],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\services\\generalService\\customHooks.js",["128"],"import { useEffect, useState } from 'react'\r\n\r\nexport const useForm = (initialState, cb = () => { }) => {\r\n  const [fields, setFields] = useState(initialState)\r\n\r\n  useEffect(() => {\r\n    cb(fields)\r\n  }, [fields])\r\n\r\n  return [\r\n    fields,\r\n    function (ev) {\r\n      const field = ev.target.name\r\n      const value = (ev.target.type === 'number') ? +ev.target.value : ev.target.value\r\n      setFields(prevFields => ({ ...prevFields, [field]: value }))\r\n    },\r\n    setFields\r\n  ]\r\n}","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\product\\EditProduct.jsx",["129","130"],"import React, { useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { productService } from \"../../services/productService\";\r\nimport { useForm } from \"../../services/generalService/customHooks\";\r\nimport { saveProduct } from \"../../store/actions/productActions\";\r\n\r\n// import { Link } from \"react-router-dom\"\r\n\r\nexport const EditProduct = ({ productId = null }) => {\r\n  const [product, handleChange, setProduct] = useForm(\r\n    productService.getEmptyProduct()\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (productId) loadProduct(productId);\r\n    return () => {\r\n      console.log(\"unmounted\");\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadProduct(productId);\r\n    return () => {\r\n      console.log(\"unmounted\");\r\n    };\r\n  }, [productId]);\r\n\r\n  const loadProduct = async (productId ) => {\r\n    if (productId) {\r\n      const _product = await productService.getById(productId);\r\n      setProduct(_product);\r\n    }\r\n  };\r\n\r\n  const onAddProduct = async (ev) => {\r\n    ev.preventDefault();\r\n    dispatch(saveProduct(product));\r\n  };\r\n\r\n  return (\r\n    <div className=\"edit-product\">\r\n      <form\r\n        className=\"form-product flex column space-between\"\r\n        onSubmit={(ev) => onAddProduct(ev)}\r\n      >\r\n        <div className=\"field-input\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            placeholder=\"Title\"\r\n            value={product.title}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"field-input\">\r\n          <input\r\n            type=\"number\"\r\n            name=\"price\"\r\n            placeholder=\"Price\"\r\n            value={product.price}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"field-input\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"description\"\r\n            placeholder=\"Description\"\r\n            value={product.description}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"field-input\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"img\"\r\n            placeholder=\"Image\"\r\n            value={product.img}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <button className=\"btn save-btn\" type=\"submit\">\r\n          Save\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\product\\ProductList.jsx",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\product\\ProductPreview.jsx",["131"],"import React from \"react\";\r\nimport { useLocation} from \"react-router-dom\";\r\nimport { RiDeleteBinLine } from \"react-icons/ri\";\r\nimport { FiEdit } from \"react-icons/fi\";\r\n\r\n\r\n// import { Link } from \"react-router-dom\"\r\n\r\nexport function ProductPreview(props) {\r\n  const location = useLocation();\r\n  const { _id, title, img, price } = props.product;\r\n  const pathname= location.pathname.slice(1);\r\n  return (\r\n    <div className=\"product-preview\">\r\n      <div className=\"card-product flex column justify-center align-center\">\r\n        <img src={img} />\r\n        <h1>{title}</h1>\r\n        <h2>{price}$</h2>\r\n      </div>\r\n      \r\n      {pathname === \"admin\" && (\r\n        <div className=\"action-card flex space-evenly\">\r\n          <FiEdit\r\n            className=\"edit-btn\"\r\n            onClick={() => {\r\n              props.onEditProduct(_id);\r\n            }}\r\n          />\r\n          \r\n          <RiDeleteBinLine\r\n            className=\"delete-btn\"\r\n            onClick={() => {\r\n              props.onDeleteProduct(_id);\r\n            }}\r\n          />\r\n        </div>\r\n      )}\r\n            {pathname === \"home\" && (\r\n        <div className=\"action-card flex justify-center\">\r\n        <button\r\n          className=\"btn buy-btn\"\r\n          onClick={() => {\r\n            props.onBuyProduct(props.product);\r\n          }}\r\n        >\r\n          Add To Cart\r\n        </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\cmps\\CartList.jsx",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\pages\\State.jsx",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\services\\cartService.js",[],"C:\\Users\\harel\\Desktop\\WebDev\\Projects\\Home assignment\\frontend\\src\\services\\stateService.js",["132","133"],"export const stateService = {\r\n    calcState\r\n}\r\n\r\nfunction calcState(carts) {\r\n    const stateApp = [];\r\n    let products = [];\r\n    const salePerDays = _getDays();\r\n    const timestamps = Object.keys(salePerDays);\r\n    const topUniqeSold = {};\r\n    // get 5 last days\r\n    //get all product\r\n    carts.forEach(cart => {\r\n        products = [...products, ...cart.productsCart];\r\n        //display sale per five last day\r\n        let dateCart = new Date(cart.date).setHours(0, 0, 0, 0)\r\n        const indexDate = timestamps.findIndex(date => date == dateCart)\r\n        if (indexDate !== -1) {\r\n            salePerDays[dateCart] += cart.totalPrice;\r\n        }\r\n\r\n        //get uniqe product sale\r\n        cart.uniqeProduct.forEach(productTitle => {\r\n            if (topUniqeSold.hasOwnProperty(productTitle)) {\r\n                topUniqeSold[`${productTitle}`] += 1\r\n            } else {\r\n                topUniqeSold[`${productTitle}`] = 1\r\n            }\r\n        })\r\n\r\n    });\r\n    const topSold = _getTopSold(products);\r\n    stateApp.push(topSold)\r\n    stateApp.push(topUniqeSold)\r\n    const salesDaysArr = _convertTimestampToString(salePerDays);\r\n    stateApp.push(salesDaysArr)\r\n    return stateApp;\r\n}\r\n\r\nfunction _getTopSold(products) {\r\n    const sumProducts = {};\r\n    products.forEach(product => {\r\n        if (!sumProducts[product.title]) sumProducts[`${product.title}`] = 0;\r\n        sumProducts[`${product.title}`]++;\r\n    })\r\n    const topFiveSold = _calcTopSold(sumProducts);\r\n    return topFiveSold;\r\n}\r\n\r\n\r\nfunction _calcTopSold(sumProducts) {\r\n    const topSold = [];\r\n    const keysSumProducts = Object.keys(sumProducts);\r\n    const valueSumProducts = Object.values(sumProducts);\r\n    for (let i = 0; i < 5; i++) {\r\n        let maxIndex = valueSumProducts.findIndex(value => value === (Math.max(...valueSumProducts)))\r\n        let keyMax = keysSumProducts.splice(maxIndex, 1).pop();\r\n        let valueMax = valueSumProducts.splice(maxIndex, 1).pop();\r\n        topSold.push([keyMax, valueMax]);\r\n    }\r\n    return topSold\r\n}\r\n\r\n\r\n\r\nfunction _getDays() {\r\n    const today = new Date(new Date().setHours(0, 0, 0, 0));\r\n    const salesPerDay = [\r\n        today.setDate(today.getDate()),\r\n        today.setDate(today.getDate() - 1),\r\n        today.setDate(today.getDate() - 1),\r\n        today.setDate(today.getDate() - 1),\r\n        today.setDate(today.getDate() - 1)\r\n    ];\r\n    const res = salesPerDay.reduce((acc, curr) => (acc[curr] = 0, acc), {});\r\n    return res\r\n}\r\n\r\nfunction _convertTimestampToString(saleDate) {\r\n\r\n    return Object.keys(saleDate).map(timestamp => {\r\n        const dateObj = new Date(+timestamp);\r\n        const month = dateObj.getMonth()+1;\r\n        const day = String(dateObj.getDate()).padStart(2, '0');\r\n        const year = dateObj.getFullYear();\r\n        const output =  day+'.'+ month + '.' + year;\r\n        return [output, saleDate[timestamp]]\r\n    });\r\n}",{"ruleId":"134","severity":1,"message":"135","line":3,"column":7,"nodeType":"136","messageId":"137","endLine":3,"endColumn":23},{"ruleId":"138","replacedBy":"139"},{"ruleId":"140","replacedBy":"141"},{"ruleId":"142","severity":1,"message":"143","line":23,"column":6,"nodeType":"144","endLine":23,"endColumn":8,"suggestions":"145"},{"ruleId":"142","severity":1,"message":"143","line":25,"column":6,"nodeType":"144","endLine":25,"endColumn":8,"suggestions":"146"},{"ruleId":"142","severity":1,"message":"147","line":29,"column":6,"nodeType":"144","endLine":29,"endColumn":8,"suggestions":"148"},{"ruleId":"149","severity":1,"message":"150","line":121,"column":16,"nodeType":"151","messageId":"152","endLine":121,"endColumn":18},{"ruleId":"149","severity":1,"message":"150","line":126,"column":23,"nodeType":"151","messageId":"152","endLine":126,"endColumn":25},{"ruleId":"134","severity":1,"message":"153","line":1,"column":17,"nodeType":"136","messageId":"137","endLine":1,"endColumn":25},{"ruleId":"134","severity":1,"message":"154","line":2,"column":10,"nodeType":"136","messageId":"137","endLine":2,"endColumn":21},{"ruleId":"134","severity":1,"message":"155","line":2,"column":23,"nodeType":"136","messageId":"137","endLine":2,"endColumn":34},{"ruleId":"134","severity":1,"message":"153","line":1,"column":17,"nodeType":"136","messageId":"137","endLine":1,"endColumn":25},{"ruleId":"134","severity":1,"message":"156","line":1,"column":27,"nodeType":"136","messageId":"137","endLine":1,"endColumn":36},{"ruleId":"134","severity":1,"message":"154","line":2,"column":10,"nodeType":"136","messageId":"137","endLine":2,"endColumn":21},{"ruleId":"134","severity":1,"message":"155","line":2,"column":23,"nodeType":"136","messageId":"137","endLine":2,"endColumn":34},{"ruleId":"157","severity":1,"message":"158","line":12,"column":9,"nodeType":"159","endLine":12,"endColumn":26},{"ruleId":"142","severity":1,"message":"160","line":8,"column":6,"nodeType":"144","endLine":8,"endColumn":14,"suggestions":"161"},{"ruleId":"142","severity":1,"message":"162","line":21,"column":6,"nodeType":"144","endLine":21,"endColumn":8,"suggestions":"163"},{"ruleId":"142","severity":1,"message":"164","line":28,"column":6,"nodeType":"144","endLine":28,"endColumn":17,"suggestions":"165"},{"ruleId":"157","severity":1,"message":"158","line":16,"column":9,"nodeType":"159","endLine":16,"endColumn":26},{"ruleId":"149","severity":1,"message":"150","line":17,"column":61,"nodeType":"151","messageId":"152","endLine":17,"endColumn":63},{"ruleId":"166","severity":1,"message":"167","line":75,"column":65,"nodeType":"168","messageId":"169","endLine":75,"endColumn":66},"no-unused-vars","'SCORE_FOR_REVIEW' is assigned a value but never used.","Identifier","unusedVar","no-native-reassign",["170"],"no-negated-in-lhs",["171"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["172"],["173"],"React Hook useCallback has a missing dependency: 'dispatch'. Either include it or remove the dependency array.",["174"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'useState' is defined but never used.","'useDispatch' is defined but never used.","'useSelector' is defined but never used.","'useEffect' is defined but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","React Hook useEffect has a missing dependency: 'cb'. Either include it or remove the dependency array. If 'cb' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["175"],"React Hook useEffect has missing dependencies: 'loadProduct' and 'productId'. Either include them or remove the dependency array.",["176"],"React Hook useEffect has a missing dependency: 'loadProduct'. Either include it or remove the dependency array.",["177"],"no-sequences","Unexpected use of comma operator.","SequenceExpression","unexpectedCommaExpression","no-global-assign","no-unsafe-negation",{"desc":"178","fix":"179"},{"desc":"178","fix":"180"},{"desc":"178","fix":"181"},{"desc":"182","fix":"183"},{"desc":"184","fix":"185"},{"desc":"184","fix":"186"},"Update the dependencies array to be: [dispatch]",{"range":"187","text":"188"},{"range":"189","text":"188"},{"range":"190","text":"188"},"Update the dependencies array to be: [cb, fields]",{"range":"191","text":"192"},"Update the dependencies array to be: [loadProduct, productId]",{"range":"193","text":"194"},{"range":"195","text":"194"},[900,902],"[dispatch]",[888,890],[998,1000],[205,213],"[cb, fields]",[663,665],"[loadProduct, productId]",[787,798]]